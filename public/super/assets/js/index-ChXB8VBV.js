import{d as j,h as A,m as W,f as X,k as Y,ag as l,aq as x,o as p,c as C,X as t,T as a,a8 as P,F as G,p as H,S as d,W as c,U as g,v as J,x as Z,Y as ee,a as te,e as oe}from"./@vue-CRBWlwId.js";import{_ as ae}from"./editModule.vue_vue_type_script_setup_true_lang-BgGHCOzw.js";import{l as ne,k as le}from"./index-BfYElSN2.js";import{g as re}from"./formatTime-Bwg9I4Gs.js";import{E as q,a as ie}from"./element-plus-C9Ov05af.js";import"./pinia-BTdriGDs.js";import"./vue-router-B8aOcPyE.js";import"./vue-i18n-Bpsr_IBC.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-tztFf6PP.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";const se={class:"container"},Oe=j({__name:"index",setup(pe){const{proxy:f}=oe(),h=A(),e=W({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,typeOptions:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0}}),i=()=>{e.loading=!0,ne("/sys/config",e.queryParams).then(o=>{e.tableData=o.rows,e.total=o.total,e.loading=!1})},k=()=>{e.queryParams.configName=void 0,e.queryParams.configName=void 0,e.queryParams.configType=void 0,i()},D=o=>f.selectDictLabel(e.typeOptions,o.configType),T=o=>{o=[],e.title="添加配置参数",h.value.openDialog(o)},V=o=>{e.title="修改配置参数",h.value.openDialog(o)},b=o=>{const r=o.configId||e.ids;q({message:'是否确认删除配置参数编号为"'+r+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return le("/sys/config",r).then(()=>{i(),ie.success("删除成功")})})},N=o=>{e.ids=o.map(r=>r.configId),e.single=o.length!=1,e.multiple=!o.length},B=()=>{const o=e.queryParams;q({message:"是否确认导出所有配置数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){let r=re();f.download("/sys/config/export",o,`配置_${r}.xlsx`)})},S=o=>{e.queryParams.pageSize=o,i()},E=o=>{e.queryParams.pageNum=o,i()};return X(()=>{i(),f.getDicts("sys_yes_no").then(o=>{e.typeOptions=o.rows}),f.mittBus.on("onEditPostModule",o=>{i()})}),Y(()=>{f.mittBus.off("onEditPostModule")}),(o,r)=>{const v=l("el-input"),y=l("el-form-item"),M=l("el-option"),z=l("el-select"),m=l("SvgIcon"),u=l("el-button"),I=l("el-form"),w=l("el-col"),K=l("el-row"),s=l("el-table-column"),O=l("el-tag"),U=l("el-table"),F=l("el-divider"),R=l("el-pagination"),$=l("el-card"),_=x("auth"),L=x("loading");return p(),C("div",se,[t($,{shadow:"always"},{default:a(()=>[t(I,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[t(y,{label:"参数名称",prop:"configName"},{default:a(()=>[t(v,{placeholder:"参数名称模糊查询",clearable:"",onKeyup:P(i,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configName,"onUpdate:modelValue":r[0]||(r[0]=n=>e.queryParams.configName=n)},null,8,["modelValue"])]),_:1}),t(y,{label:"参数键名",prop:"configKey"},{default:a(()=>[t(v,{placeholder:"参数键名模糊查询",clearable:"",onKeyup:P(i,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configKey,"onUpdate:modelValue":r[1]||(r[1]=n=>e.queryParams.configKey=n)},null,8,["modelValue"])]),_:1}),t(y,{label:"系统内置",prop:"configType"},{default:a(()=>[t(z,{modelValue:e.queryParams.configType,"onUpdate:modelValue":r[2]||(r[2]=n=>e.queryParams.configType=n),placeholder:"系统内置",clearable:"",style:{width:"240px"}},{default:a(()=>[(p(!0),C(G,null,H(e.typeOptions,n=>(p(),d(M,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:a(()=>[t(u,{type:"primary",onClick:i},{default:a(()=>[t(m,{name:"ele-Search"}),c(" 搜索 ")]),_:1}),t(u,{onClick:k},{default:a(()=>[t(m,{name:"ele-Refresh"}),c(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),t(K,{gutter:10,class:"mb8"},{default:a(()=>[t(w,{span:1.5},{default:a(()=>[g((p(),d(u,{type:"primary",plain:"",onClick:T},{default:a(()=>[t(m,{name:"ele-Plus"}),c("新增 ")]),_:1})),[[_,"system:config:add"]])]),_:1}),t(w,{span:1.5},{default:a(()=>[g((p(),d(u,{type:"danger",plain:"",disabled:e.multiple,onClick:b},{default:a(()=>[t(m,{name:"ele-Delete"}),c("删除 ")]),_:1},8,["disabled"])),[[_,"system:config:delete"]])]),_:1}),t(w,{span:1.5},{default:a(()=>[g((p(),d(u,{type:"warning",plain:"",onClick:B},{default:a(()=>[t(m,{name:"ele-Download"}),c("导出 ")]),_:1})),[[_,"system:config:export"]])]),_:1})]),_:1}),g((p(),d(U,{border:"",data:e.tableData,onSelectionChange:N},{default:a(()=>[t(s,{type:"selection",width:"55",align:"center"}),t(s,{label:"参数主键",align:"center",prop:"configId"}),t(s,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),t(s,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),t(s,{label:"参数键值",align:"center",prop:"configValue"}),t(s,{label:"系统内置",align:"center",prop:"configType"},{default:a(n=>[t(O,{type:n.row.configType==="1"?"danger":"success","disable-transitions":""},{default:a(()=>[c(J(D(n.row)),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(s,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),t(s,{label:"操作",align:"center",fixed:"right",width:"180"},{default:a(n=>[g((p(),d(u,{type:"text",onClick:Q=>V(n.row)},{default:a(()=>[t(m,{name:"ele-Edit"}),c("修改 ")]),_:2},1032,["onClick"])),[[_,"system:config:edit"]]),n.row.parentId!=0?g((p(),d(u,{key:0,type:"text",onClick:Q=>b(n.row)},{default:a(()=>[t(m,{name:"ele-Delete"}),c("删除 ")]),_:2},1032,["onClick"])),[[_,"system:config:delete"]]):Z("",!0)]),_:1})]),_:1},8,["data"])),[[L,e.loading]]),g(te("div",null,[t(F),t(R,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:E},null,8,["total","current-page","page-size"])],512),[[ee,e.total>0]])]),_:1}),t(ae,{ref_key:"editModuleRef",ref:h,title:e.title},null,8,["title"])])}}});export{Oe as default};
