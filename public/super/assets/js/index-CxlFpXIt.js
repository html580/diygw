import{g as I}from"./formatTime-Bwg9I4Gs.js";import O from"./editModule-BR7x-Uo5.js";import{l as A,k as R,_ as Q}from"./index-BfYElSN2.js";import{E,a as K}from"./element-plus-C9Ov05af.js";import{h as U,m as L,f as j,k as W,$ as X,e as Y,ag as u,aq as k,o as p,c as B,X as e,T as a,a8 as P,F as G,p as H,S as _,W as c,U as y,v as J,x as Z,Y as $,a as ee}from"./@vue-CRBWlwId.js";import"./pinia-BTdriGDs.js";import"./vue-router-B8aOcPyE.js";import"./vue-i18n-Bpsr_IBC.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-tztFf6PP.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";const te={name:"index",components:{EditModule:O},setup(){const{proxy:o}=Y(),r=U(),n=L({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[],queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0}}),l=()=>{n.loading=!0,A("/sys/post",n.queryParams).then(t=>{n.tableData=t.rows,n.total=t.total,n.loading=!1})},w=()=>{n.queryParams.postName=void 0,n.queryParams.postCode=void 0,n.queryParams.status=void 0,l()},v=t=>{n.queryParams.pageNum=t,l()},h=t=>{n.queryParams.pageSize=t,l()},C=t=>o.selectDictLabel(n.statusOptions,t.status),b=t=>{t=[],n.title="添加岗位",r.value.openDialog(t)},D=t=>{n.title="修改岗位",r.value.openDialog(t)},i=t=>{const m=t.postId||n.ids;E({message:'是否确认删除岗位编号为"'+m+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return R("/sys/post",m).then(()=>{l(),K.success("删除成功")})})},d=()=>{const t=n.queryParams;E({message:"是否确认导出所有岗位数据项?",title:"警告",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){let m=I();o.download("/sys/post/export",t,`岗位_${m}.xlsx`)})},F=t=>{n.ids=t.map(m=>m.postId),n.single=t.length!=1,n.multiple=!t.length};return j(()=>{l(),o.getDicts("sys_normal_disable").then(t=>{n.statusOptions=t.rows}),o.mittBus.on("onEditPostModule",()=>{l()})}),W(()=>{o.mittBus.off("onEditPostModule")}),{editModuleRef:r,handleSelectionChange:F,handleQuery:l,handleCurrentChange:v,handleSizeChange:h,resetQuery:w,statusFormat:C,onOpenAddModule:b,onOpenEditModule:D,onTabelRowDel:i,handleExport:d,...X(n)}}},oe={class:"container"};function ae(o,r,n,l,w,v){const h=u("el-input"),C=u("el-form-item"),b=u("el-option"),D=u("el-select"),i=u("SvgIcon"),d=u("el-button"),F=u("el-form"),t=u("el-col"),m=u("el-row"),g=u("el-table-column"),q=u("el-tag"),S=u("el-table"),V=u("el-divider"),M=u("el-pagination"),N=u("el-card"),x=u("EditModule"),f=k("auth"),z=k("loading");return p(),B("div",oe,[e(N,{shadow:"always"},{default:a(()=>[e(F,{model:o.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[e(C,{label:"岗位编码",prop:"postCode"},{default:a(()=>[e(h,{placeholder:"请输入岗位编码模糊查询",clearable:"",onKeyup:P(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:o.queryParams.postCode,"onUpdate:modelValue":r[0]||(r[0]=s=>o.queryParams.postCode=s)},null,8,["onKeyup","modelValue"])]),_:1}),e(C,{label:"岗位名称",prop:"postName"},{default:a(()=>[e(h,{placeholder:"请输入岗位名称模糊查询",clearable:"",onKeyup:P(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:o.queryParams.postName,"onUpdate:modelValue":r[1]||(r[1]=s=>o.queryParams.postName=s)},null,8,["onKeyup","modelValue"])]),_:1}),e(C,{label:"状态",prop:"status"},{default:a(()=>[e(D,{modelValue:o.queryParams.status,"onUpdate:modelValue":r[2]||(r[2]=s=>o.queryParams.status=s),placeholder:"岗位状态",clearable:"",style:{width:"240px"}},{default:a(()=>[(p(!0),B(G,null,H(o.statusOptions,s=>(p(),_(b,{key:s.dictValue,label:s.dictLabel,value:s.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(d,{type:"primary",onClick:l.handleQuery},{default:a(()=>[e(i,{name:"ele-Search"}),c(" 搜索 ")]),_:1},8,["onClick"]),e(d,{onClick:l.resetQuery},{default:a(()=>[e(i,{name:"ele-Refresh"}),c(" 重置 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(m,{gutter:10,class:"mb8"},{default:a(()=>[e(t,{span:1.5},{default:a(()=>[y((p(),_(d,{type:"primary",plain:"",onClick:l.onOpenAddModule},{default:a(()=>[e(i,{name:"ele-Plus"}),c("新增 ")]),_:1},8,["onClick"])),[[f,"system:post:add"]])]),_:1}),e(t,{span:1.5},{default:a(()=>[y((p(),_(d,{type:"danger",plain:"",disabled:o.multiple,onClick:l.onTabelRowDel},{default:a(()=>[e(i,{name:"ele-Delete"}),c("删除 ")]),_:1},8,["disabled","onClick"])),[[f,"system:post:delete"]])]),_:1}),e(t,{span:1.5},{default:a(()=>[y((p(),_(d,{type:"warning",plain:"",onClick:l.handleExport},{default:a(()=>[e(i,{name:"ele-Download"}),c("导出 ")]),_:1},8,["onClick"])),[[f,"system:post:export"]])]),_:1})]),_:1}),y((p(),_(S,{data:o.tableData,border:"",onSelectionChange:l.handleSelectionChange},{default:a(()=>[e(g,{type:"selection",width:"55",align:"center"}),e(g,{label:"岗位编号",align:"center",prop:"postId"}),e(g,{label:"岗位编码",align:"center",prop:"postCode"}),e(g,{label:"岗位名称",align:"center",prop:"postName"}),e(g,{label:"岗位排序",align:"center",prop:"sort"}),e(g,{label:"状态",align:"center",prop:"status"},{default:a(s=>[e(q,{type:s.row.status==="1"?"danger":"success","disable-transitions":""},{default:a(()=>[c(J(l.statusFormat(s.row)),1)]),_:2},1032,["type"])]),_:1}),e(g,{label:"操作",align:"center",fixed:"right",width:"180"},{default:a(s=>[y((p(),_(d,{type:"text",onClick:T=>l.onOpenEditModule(s.row)},{default:a(()=>[e(i,{name:"ele-Edit"}),c("修改 ")]),_:2},1032,["onClick"])),[[f,"system:post:edit"]]),s.row.parentId!=0?y((p(),_(d,{key:0,type:"text",onClick:T=>l.onTabelRowDel(s.row)},{default:a(()=>[e(i,{name:"ele-Delete"}),c("删除 ")]),_:2},1032,["onClick"])),[[f,"system:post:delete"]]):Z("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[z,o.loading]]),y(ee("div",null,[e(V),e(M,{background:"",total:o.total,"current-page":o.queryParams.pageNum,"page-size":o.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[$,o.total>0]])]),_:1}),e(x,{ref:"editModuleRef",title:o.title},null,8,["title"])])}const Me=Q(te,[["render",ae]]);export{Me as default};
