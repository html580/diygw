import{m as S,h as B,ag as p,o as c,c as d,X as o,T as $,F as b,p as D,u as m,t as v,U as z,a as T,q,Y as E,Q as F,L,x as M,n as x}from"./@vue-CRBWlwId.js";import{m as P}from"./@vueuse-BIgT8fdk.js";import{t as _}from"./vue-draggable-plus-D90yCKwz.js";import{a as N}from"./uploadinput-CMX3D0tT.js";import{_ as j}from"./index-BfYElSN2.js";import{u as A,E as U}from"./element-plus-C9Ov05af.js";const O={style:{"line-height":"0",width:"100%"},class:"flex justify-start"},Q={__name:"photo",props:{modelValue:{type:Array,default:()=>[]},width:{default:80},height:{default:80},isMove:{default:!0},limit:{default:0},customer:{type:Object,required:!1,default:()=>{}},contractId:{required:!1,default:""},storageType:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(t,{emit:y}){const{formItem:e}=A(),w=t,n=S({isdrag:!1,index:-1}),g=B(),a=P(w,"modelValue",y),h=(s=-1)=>{n.index=s,x(()=>{g.value.handleStorageDlg("","上传图片")})},C=(s=[])=>{s.length&&(n.index!=-1?a.value[n.index]=s[n.index].url:s.forEach(l=>{a.value.push(l.url)}),x(()=>{var l,r;(l=e==null?void 0:e.validate)==null||l.call(e,"blur").catch(i=>{console.log(i)}),(r=e==null?void 0:e.validate)==null||r.call(e,"change").catch(i=>{console.log(i)})}))},k=(s=-1)=>{U({message:"是否删除该文件?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.value.splice(s,1)})};return(s,l)=>{const r=p("el-image"),i=p("SvgIcon");return c(),d("div",O,[o(m(_),F({tag:"ul"},{animation:200,disabled:!1,ghostClass:"ghost"},{modelValue:m(a),"onUpdate:modelValue":l[0]||(l[0]=u=>L(a)?a.value=u:null),class:"el-upload-list el-upload-list--picture-card",group:"subform","item-key":"url"}),{default:$(()=>[(c(!0),d(b,null,D(m(a),(u,f)=>(c(),d("li",{class:"el-upload-list__item",style:v(`width:${t.width}px; height:${t.height}px;`)},[o(r,{style:"width:100%; height:100%",src:u,fit:"contain"},null,8,["src"]),z(T("span",{class:q({"el-upload-list__item-actions":!0,"diy-cm":t.isMove})},[o(i,{style:{color:"#fff"},name:"ele-Plus",class:"margin-right",onClick:V=>h(f),size:20},null,8,["onClick"]),o(i,{style:{color:"#fff"},name:"ele-Delete",onClick:V=>k(f),size:20},null,8,["onClick"])],2),[[E,!n.isdrag]])],4))),256))]),_:1},16,["modelValue"]),t.limit==0||m(a).length==0&&t.limit==1?(c(),d("div",{key:0,tabindex:"0",style:v([{"margin-bottom":"8px"},`width:${t.width}px; height:${t.height}px;`]),class:"el-upload el-upload--picture-card",onClick:l[1]||(l[1]=u=>h(-1))},[o(i,{name:"ele-Plus",size:20})],4)):M("",!0),o(N,{ref_key:"storage",ref:g,limit:t.limit,onConfirm:C},null,8,["limit"])])}}},W=j(Q,[["__scopeId","data-v-93565e07"]]);export{W as D};
