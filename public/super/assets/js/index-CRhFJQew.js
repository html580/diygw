import{d as z,h as G,m as J,$ as Y,f as Z,k as ee,ag as s,aq as B,o as _,c as N,X as e,T as o,u as m,a8 as te,F as ne,p as oe,S as h,W as l,U as v,v as y,a as ae,e as le}from"./@vue-CRBWlwId.js";import{g as se}from"./formatTime-Bwg9I4Gs.js";import{_ as ie}from"./editMenu.vue_vue_type_script_setup_true_lang-x7ywO64h.js";import{l as re,m as ue,k as me,y as pe}from"./index-BfYElSN2.js";import{E as C,a as O}from"./element-plus-C9Ov05af.js";import"./@element-plus-tztFf6PP.js";import"./pinia-BTdriGDs.js";import"./vue-router-B8aOcPyE.js";import"./vue-i18n-Bpsr_IBC.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";const de={class:"container"},ce={class:"flex"},Ke=z({__name:"index",setup(_e){const{proxy:i}=le(),w=G(),a=J({loading:!0,menuList:[],menuOptions:[],title:"",open:!1,isHideOptions:[],statusOptions:[],menuTypeOptions:[],queryParams:{menuName:void 0,status:void 0}}),{loading:I,menuList:M,title:V,statusOptions:q,queryParams:f}=Y(a),D=()=>{a.loading=!0,re("/sys/menu",a.queryParams).then(t=>{a.menuList=ue(t.rows,"menuId","parentId","children"),a.loading=!1})},c=()=>{D()},P=()=>{a.queryParams.menuName="",a.queryParams.status="",a.queryParams.menuType="",c()},E=()=>{const t=a.queryParams;C({message:"是否确认导出所有菜单数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){let p=se();i.download("/sys/menu/export",t,`菜单_${p}.xlsx`)})},k=t=>{a.title="添加菜单";let p=t.menuId;t=[],t.parentId=p,w.value.openDialog(t)},L=t=>{a.title="修改菜单",w.value.openDialog(t)},F=t=>{C({message:'是否确认删除名称为"'+t.menuName+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return me("/sys/menu",t.menuId).then(()=>{c(),O.success("删除成功")})})},$=t=>{C({message:'是否确认复制名称为"'+t.menuName+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return pe("/sys/menu",t.menuId).then(()=>{c(),O.success("复制成功")})})},H=t=>t.menuType=="F"?"":i.selectDictLabel(a.isHideOptions,t.isHide),S=t=>t.menuType=="F"?"":i.selectDictLabel(a.statusOptions,t.status),R=t=>i.selectDictLabel(a.menuTypeOptions,t.menuType);return Z(()=>{D(),i.getDicts("sys_show_hide").then(t=>{a.isHideOptions=t.rows}),i.getDicts("sys_menu_type").then(t=>{a.menuTypeOptions=t.rows}),i.getDicts("sys_normal_disable").then(t=>{a.statusOptions=t.rows}),i.mittBus.on("onEditMenuModule",()=>{c()})}),ee(()=>{i.mittBus.off("onEditDeptModule")}),(t,p)=>{const U=s("el-input"),g=s("el-form-item"),K=s("el-option"),Q=s("el-select"),r=s("SvgIcon"),d=s("el-button"),A=s("el-form"),u=s("el-table-column"),b=s("el-tag"),W=s("el-table"),X=s("el-card"),T=B("auth"),j=B("loading");return _(),N("div",de,[e(X,{shadow:"always"},{default:o(()=>[e(A,{model:m(f),ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(g,{label:"菜单名称",prop:"menuName"},{default:o(()=>[e(U,{placeholder:"菜单名称模糊查询",clearable:"",onKeyup:te(c,["enter"]),style:{width:"240px"},modelValue:m(f).menuName,"onUpdate:modelValue":p[0]||(p[0]=n=>m(f).menuName=n)},null,8,["modelValue"])]),_:1}),e(g,{label:"状态",prop:"status"},{default:o(()=>[e(Q,{modelValue:m(f).status,"onUpdate:modelValue":p[1]||(p[1]=n=>m(f).status=n),placeholder:"菜单状态",clearable:"",style:{width:"240px"}},{default:o(()=>[(_(!0),N(ne,null,oe(m(q),n=>(_(),h(K,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(d,{type:"primary",onClick:c},{default:o(()=>[e(r,{name:"ele-Search"}),l(" 搜索 ")]),_:1}),e(d,{onClick:P},{default:o(()=>[e(r,{name:"ele-Refresh"}),l(" 重置 ")]),_:1}),v((_(),h(d,{type:"primary",plain:"",onClick:k},{default:o(()=>[e(r,{name:"ele-Plus"}),l(" 新增 ")]),_:1})),[[T,"system:menu:add"]]),v((_(),h(d,{type:"warning",plain:"",onClick:E},{default:o(()=>[e(r,{name:"ele-Download"}),l("导出 ")]),_:1})),[[T,"system:menu:add"]])]),_:1})]),_:1},8,["model"]),v((_(),h(W,{data:m(M),"row-key":"menuId",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[e(u,{prop:"menuName",label:"菜单名称","show-overflow-tooltip":!0},{default:o(n=>[l(y(n.row.menuId)+":"+y(n.row.menuName),1)]),_:1}),e(u,{prop:"icon",label:"图标",align:"center",width:"100"},{default:o(n=>[e(r,{name:n.row.icon},null,8,["name"])]),_:1}),e(u,{prop:"orderNum",label:"排序",width:"60"}),e(u,{prop:"icon",label:"分类",align:"center",width:"100"},{default:o(n=>[e(b,{type:n.row.menuType==="M"?"danger":n.row.menuType==="C"?"success":"warning","disable-transitions":""},{default:o(()=>[l(y(R(n.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"permission",label:"权限标识",width:"100","show-overflow-tooltip":!0}),e(u,{prop:"component",label:"组件路径",width:"150","show-overflow-tooltip":!0}),e(u,{prop:"status",label:"状态",width:"80"},{default:o(n=>[e(b,{type:n.row.status==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[l(y(S(n.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"status",label:"显示隐藏",width:"100"},{default:o(n=>[e(b,{type:n.row.status==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[l(y(H(n.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(u,{label:"操作",align:"center",fixed:"right",width:"380"},{default:o(n=>[ae("div",ce,[e(d,{type:"text",icon:"el-icon-edit",onClick:x=>L(n.row)},{default:o(()=>[e(r,{name:"ele-Edit"}),l("修改 ")]),_:2},1032,["onClick"]),e(d,{type:"text",icon:"el-icon-plus",onClick:x=>k(n.row)},{default:o(()=>[e(r,{name:"ele-Plus"}),l("新增 ")]),_:2},1032,["onClick"]),e(d,{type:"text",icon:"el-icon-edit",onClick:x=>$(n.row)},{default:o(()=>[e(r,{name:"ele-CopyDocument"}),l("复制 ")]),_:2},1032,["onClick"]),e(d,{type:"text",icon:"el-icon-delete",onClick:x=>F(n.row)},{default:o(()=>[e(r,{name:"ele-Delete"}),l("删除 ")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[j,m(I)]])]),_:1}),e(ie,{ref_key:"editMenuRef",ref:w,title:m(V)},null,8,["title"])])}}});export{Ke as default};
