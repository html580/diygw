import{V}from"./vue-ueditor-wrap-B1amLqDs.js";import{m as v}from"./@vueuse-BIgT8fdk.js";import{a as d}from"./uploadinput-CMX3D0tT.js";import{S as E}from"./index-BfYElSN2.js";import{h as a,o as y,c as I,X as n,u as m,L as D,d as R}from"./@vue-CRBWlwId.js";var C={VITE_PORT:"9999",VITE_OPEN:"/",VITE_OPEN_CDN:"false",VITE_PUBLIC_PATH:"/",VITE_API_PROXY:"http://f.com",VITE_API_URL:"",BASE_URL:"/super/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const O={style:{border:"1px solid #ccc"}},P=R({name:"DiyEditor",inheritAttrs:!0}),H=Object.assign(P,{props:{modelValue:{type:String,default:""},height:{type:Number,default:300}},emits:["update:modelValue","handleBlur"],setup(c,{emit:f}){const r=a(),l=a(null),s=a(null),u=c,i=v(u,"modelValue",f),g={Authorization:E.get("token")};console.log(C);const p=a({debug:!1,UEDITOR_HOME_URL:"ueditor/",serverUrl:"/sys/storage/upload",serverHeaders:g,autoHeightEnabled:!1,initialFrameHeight:u.height,initialFrameWidth:"100%",toolbarCallback:function(e,t){if(r.value=t,e=="insertimage")return l.value.handleStorageDlg("","上传图片"),!0;if(e=="insertvideo")return s.value.handleStorageDlg("","上传视频"),!0}}),_=e=>{e.length&&e.forEach(t=>{var o;(o=r.value)==null||o.execCommand("insertHtml","<img src='"+t.url+"'/>")})},h=e=>{e.length&&e.forEach(t=>{var o;(o=r.value)==null||o.execCommand("insertHtml","<video src='"+t.url+"'/>")})};return(e,t)=>(y(),I("div",O,[n(m(V),{modelValue:m(i),"onUpdate:modelValue":t[0]||(t[0]=o=>D(i)?i.value=o:null),config:p.value,editorDependencies:["ueditor.config.js","ueditor.all.js"],ref_key:"editorRef",ref:r},null,8,["modelValue","config","editorDependencies"]),n(d,{ref_key:"storageImg",ref:l,style:{display:"none"},onConfirm:_},null,512),n(d,{ref_key:"storageVideo",ref:s,type:"video",accept:".rm,.rmvb,.wmv,.avi,.mpg,.mpeg,.mp4",style:{display:"none"},onConfirm:h},null,512)]))}});export{H as _};
