import{d as O,h as U,m as F,f as Q,ag as n,aq as w,o as m,c as R,X as e,T as a,a8 as v,W as p,U as d,S as _,v as j,Y as W,a as X,e as Y}from"./@vue-CRBWlwId.js";import{l as A,w as G,k as H}from"./index-BfYElSN2.js";import{E as C,a as q}from"./element-plus-C9Ov05af.js";import"./pinia-BTdriGDs.js";import"./vue-router-B8aOcPyE.js";import"./vue-i18n-Bpsr_IBC.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-tztFf6PP.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";const J={class:"system-user-container container"},De=O({__name:"index",setup(Z){const{proxy:f}=Y();U(null);const t=F({loading:!0,total:0,tableData:[],ids:[],single:!0,multiple:!0,title:"",statusOptions:[],queryParams:{pageNum:1,pageSize:10,loginLocation:void 0,username:void 0}}),l=()=>{t.loading=!0,A("/log/logins",t.queryParams).then(o=>{t.tableData=o.rows,t.total=o.total,t.loading=!1})},x=()=>{t.queryParams.loginLocation=void 0,t.queryParams.username=void 0,l()},D=()=>{C({message:"是否确认清空所有登录日志数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return G("/log/logins")}).then(()=>{l(),q.success("清空成功")})},P=o=>{const r=o.infoId||t.ids;C({message:'是否确认删除访问编号为"'+r+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return H("log/logins",r).then(()=>{l(),q.success("删除成功")})})},S=o=>{t.queryParams.pageSize=o,l()},B=o=>{t.queryParams.pageNum=o,l()},k=o=>f.selectDictLabel(t.statusOptions,o.status),z=o=>{t.ids=o.map(r=>r.infoId),t.single=o.length!=1,t.multiple=!o.length};return Q(()=>{l(),f.getDicts("sys_common_status").then(o=>{t.statusOptions=o.rows})}),(o,r)=>{const h=n("el-input"),g=n("el-form-item"),c=n("SvgIcon"),u=n("el-button"),V=n("el-form"),y=n("el-col"),T=n("el-row"),s=n("el-table-column"),I=n("el-tag"),L=n("el-table"),N=n("el-divider"),E=n("el-pagination"),K=n("el-card"),b=w("auth"),M=w("loading");return m(),R("div",J,[e(K,{shadow:"always"},{default:a(()=>[e(V,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[e(g,{label:"登录地点",prop:"loginLocation"},{default:a(()=>[e(h,{placeholder:"请输入登录地点模糊查询",clearable:"",onKeyup:v(l,["enter"]),style:{width:"240px"},modelValue:t.queryParams.loginLocation,"onUpdate:modelValue":r[0]||(r[0]=i=>t.queryParams.loginLocation=i)},null,8,["modelValue"])]),_:1}),e(g,{label:"用户名称",prop:"userName"},{default:a(()=>[e(h,{placeholder:"请输入用户名称模糊查询",clearable:"",onKeyup:v(l,["enter"]),style:{width:"240px"},modelValue:t.queryParams.username,"onUpdate:modelValue":r[1]||(r[1]=i=>t.queryParams.username=i)},null,8,["modelValue"])]),_:1}),e(g,null,{default:a(()=>[e(u,{type:"primary",onClick:l},{default:a(()=>[e(c,{name:"elementSearch"}),p(" 搜索 ")]),_:1}),e(u,{onClick:x},{default:a(()=>[e(c,{name:"elementRefresh"}),p(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),e(T,{gutter:10,class:"mb8"},{default:a(()=>[e(y,{span:1.5},{default:a(()=>[d((m(),_(u,{type:"danger",plain:"",disabled:t.multiple,onClick:P},{default:a(()=>[e(c,{name:"elementDelete"}),p("删除 ")]),_:1},8,["disabled"])),[[b,"log:login:delete"]])]),_:1}),e(y,{span:1.5},{default:a(()=>[d((m(),_(u,{type:"danger",plain:"",onClick:D},{default:a(()=>[e(c,{name:"elementDelete"}),p("清空 ")]),_:1})),[[b,"log:login:clean"]])]),_:1})]),_:1}),d((m(),_(L,{border:"",data:t.tableData,onSelectionChange:z},{default:a(()=>[e(s,{type:"selection",width:"55",align:"center"}),e(s,{label:"访问编号",align:"center",prop:"infoId"}),e(s,{label:"用户名称",align:"center",prop:"username"}),e(s,{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),e(s,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(s,{label:"浏览器",align:"center",prop:"browser"}),e(s,{label:"操作系统",align:"center",prop:"os"}),e(s,{label:"登录状态",align:"center",prop:"status"},{default:a(i=>[e(I,{type:i.row.status==="1"?"success":"danger","disable-transitions":""},{default:a(()=>[p(j(k(i.row)),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"登录时间",align:"center",prop:"createTime","show-overflow-tooltip":!0})]),_:1},8,["data"])),[[M,t.loading]]),d(X("div",null,[e(N),e(E,{background:"",total:t.total,"current-page":t.queryParams.pageNum,"page-sizes":[10,20,30,40],"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:B},null,8,["total","current-page","page-size"])],512),[[W,t.total>0]])]),_:1})])}}});export{De as default};
