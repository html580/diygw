const __vite__fileDeps=["assets/js/iframes-B1j7MHYl.js","assets/js/@vue-CRBWlwId.js","assets/js/vue-router-B8aOcPyE.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{f as C,u as I,e as v,S as E,b as P}from"./index-BfYElSN2.js";import{d as y,m as x,j as u,O as B,n as h,f as S,k as D,i as O,ag as U,o as l,c as b,X as r,T as f,Z as d,S as _,U as w,Y as R,V as M,aE as j,u as X,aV as Y}from"./@vue-CRBWlwId.js";import{u as Z,b as q}from"./vue-router-B8aOcPyE.js";import{s as V}from"./pinia-BTdriGDs.js";import"./vue-i18n-Bpsr_IBC.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-tztFf6PP.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./element-plus-C9Ov05af.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";const z={class:"layout-parent"},F=y({name:"layoutParentView",inheritAttrs:!0}),ye=y({...F,setup(G){const g=Y(()=>P(()=>import("./iframes-B1j7MHYl.js"),__vite__mapDeps([0,1,2]))),a=Z(),K=q(),A=C(),T=I(),{keepAliveNames:o,cachedViews:p}=V(A),{themeConfig:m}=V(T),e=x({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),n=u(()=>m.value.animation),k=u(()=>m.value.isTagsview?p.value:e.keepAliveNameList),c=u(()=>a.meta.isIframe),L=async()=>{K.getRoutes().forEach(t=>{t.meta.isIframe&&(t.meta.isIframeOpen=!1,t.meta.loading=!0,e.iframeList.push({...t}))})};return B(()=>{e.keepAliveNameList=o.value,v.on("onTagsViewRefreshRouterView",t=>{e.keepAliveNameList=o.value.filter(s=>a.name!==s),e.refreshRouterViewKey="",e.iframeRefreshKey="",h(()=>{e.refreshRouterViewKey=t,e.iframeRefreshKey=t,e.keepAliveNameList=o.value})})}),S(()=>{L(),h(()=>{setTimeout(()=>{if(m.value.isCacheTagsView){let t=E.get("tagsViewList")||[];p.value=t.filter(s=>{var i;return(i=s.meta)==null?void 0:i.isKeepAlive}).map(s=>s.name)}},0)})}),D(()=>{v.off("onTagsViewRefreshRouterView",()=>{})}),O(()=>a.fullPath,()=>{e.refreshRouterViewKey=decodeURI(a.fullPath)},{immediate:!0}),(t,s)=>{const i=U("router-view");return l(),b("div",z,[r(i,null,{default:f(({Component:N})=>[r(d,{name:n.value,mode:"out-in"},{default:f(()=>[(l(),_(j,{include:k.value},[w((l(),_(M(N),{key:e.refreshRouterViewKey,class:"w100"})),[[R,!c.value]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),r(d,{name:n.value,mode:"out-in"},{default:f(()=>[w(r(X(g),{class:"w100",refreshKey:e.iframeRefreshKey,name:n.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[R,c.value]])]),_:1},8,["name"])])}}});export{ye as default};
