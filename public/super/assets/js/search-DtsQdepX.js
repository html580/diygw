import{b as C}from"./vue-router-B8aOcPyE.js";import{v as T}from"./vue-i18n-Bpsr_IBC.js";import{s as R}from"./pinia-BTdriGDs.js";import{a as k,_ as I}from"./index-BfYElSN2.js";import{d,h as B,m as Q,ag as r,o as b,c as A,X as i,T as m,a as N,W as O,v as H,n as M}from"./@vue-CRBWlwId.js";import"./@intlify-Bn43FqoL.js";import"./vue-DEEPytDe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-tztFf6PP.js";import"./nprogress-B-yuMcN-.js";import"./axios-Ds1py3KQ.js";import"./element-plus-C9Ov05af.js";import"./lodash-es-CW97kIZl.js";import"./@vueuse-BIgT8fdk.js";import"./@popperjs-CER6Qr1e.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-r8A8W4xn.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-DwF5HINA.js";import"./escape-html-HzfLCvW4.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DuJrlvqV.js";import"./lodash-CnNYTNB6.js";import"./mitt-DJ65BbbF.js";import"./file-saver-B2L8jjWN.js";import"./diygw-datav-DLF-c6uN.js";const U={class:"layout-search-dialog"},$=d({name:"layoutBreadcrumbSearch",inheritAttrs:!0}),j=d({...$,setup(D,{expose:f}){const h=k(),{tagsViewRoutes:_}=R(h),p=B(),{t:w}=T.useI18n(),u=C(),o=Q({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),S=()=>{o.menuQuery="",o.isShowSearch=!0,v(),M(()=>{setTimeout(()=>{p.value.focus()})})},V=()=>{o.isShowSearch=!1},g=(e,t)=>{let s=e?o.tagsViewList.filter(L(e)):o.tagsViewList;t(s)},L=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1||w(t.meta.title).indexOf(e.toLowerCase())>-1,v=()=>{if(o.tagsViewList.length>0)return!1;_.value.map(e=>{var t;(t=e.meta)!=null&&t.isHide||o.tagsViewList.push({...e})})},x=e=>{var n,l,c;let{path:t,redirect:s}=e;(n=e.meta)!=null&&n.isLink&&!((l=e.meta)!=null&&l.isIframe)?window.open((c=e.meta)==null?void 0:c.isLink):s?u.push(s):u.push(t),V()};return f({openSearch:S}),(e,t)=>{const s=r("ele-Search"),n=r("el-icon"),l=r("SvgIcon"),c=r("el-autocomplete"),y=r("el-dialog");return b(),A("div",U,[i(y,{modelValue:o.isShowSearch,"onUpdate:modelValue":t[1]||(t[1]=a=>o.isShowSearch=a),"destroy-on-close":"","show-close":!1},{footer:m(()=>[i(c,{modelValue:o.menuQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>o.menuQuery=a),"fetch-suggestions":g,placeholder:e.$t("message.user.searchPlaceholder"),ref_key:"layoutMenuAutocompleteRef",ref:p,onSelect:x,"fit-input-width":!0},{prefix:m(()=>[i(n,{class:"el-input__icon"},{default:m(()=>[i(s)]),_:1})]),default:m(({item:a})=>[N("div",null,[i(l,{name:a.meta.icon,class:"mr5"},null,8,["name"]),O(" "+H(e.$t(a.meta.title)),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])])}}}),fe=I(j,[["__scopeId","data-v-d52859b6"]]);export{fe as default};
